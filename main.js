!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(5),o=n(6),i=n(7);e.exports=function(e){return r(e)||o(e)||i()}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return r.exec(e).slice(1)};function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return(r?"/":"")+(t=n(i(t.split("/"),function(e){return!!e}),!r).join("/"))||"."},t.normalize=function(e){var r=t.isAbsolute(e),o="/"===a(e,-1);return(e=n(i(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),c=a,u=0;u<a;u++)if(o[u]!==i[u]){c=u;break}var s=[];for(u=c;u<o.length;u++)s.push("..");return(s=s.concat(i.slice(c))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(10))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e,t){this.path=e,this.name=i.default.basename(e),this.dir=i.default.dirname(e),this.type=t},e.exports=t.default},function(e,t,n){e.exports=n(16)},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(9),i=n(3),a=(r=i)&&r.__esModule?r:{default:r};a.default.prototype.readFile=function(e){if("file"!==this.type)throw new TypeError("Not a file.");return(0,o.readFile)(this.path,e)},function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(t,function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o)),t.DirectoryEntry=a.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.readFile=function(e){return l(e).then(function(e){return e instanceof ArrayBuffer||(e=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,o=e.length;r<o;r++)n[r]=e.charCodeAt(r);return t}(e.toString())),e})},t.readString=function(e){return l(e).then(function(e){var t;return e instanceof ArrayBuffer&&(t=e,e=String.fromCharCode.apply(null,new Uint16Array(t))),e})},t.writeFile=function(e,t){return new Promise(function(n,r){s("readwrite",function(i){var a=i.put({path:e,dir:o.default.dirname(e),type:"file",data:t});a.onerror=r,a.onsuccess=function(e){n()}})})},t.removeFile=f,t.readdir=p,t.mkdir=function(e){return new Promise(function(t,n){s("readwrite",function(r){var i=d(o.default),a=r.put({path:e,dir:o.default.dirname(i),type:"directory"});a.onerror=n,a.onsuccess=function(e){t()}})})},t.rmdir=function e(t){return p(t).then(function n(r){if(!r||!r.length)return f(t);var o=r.shift(),i="directory"===o.type?e:f;return i(o.name).then(function(){return n(r)})})};var o=r(n(2)),i=r(n(3));var a=window.location.host+"_filesystem",c="files",u="dir";function s(e,t){!function(e){var t=window.indexedDB.open(a,1);t.onupgradeneeded=function(e){e.target.result.createObjectStore(c,{keyPath:"path"}).createIndex(u,"dir",{unique:!1})},t.onsuccess=function(t){e(t.target.result)}}(function(n){var r=n.transaction([c],e).objectStore(c);t(r)})}var l=function(e){return new Promise(function(t,n){s("readonly",function(r){var o=r.get(e);o.onerror=n,o.onsuccess=function(e){var r=e.target.result;r&&r.data?t(r.data):n("File not found")}})})};function f(e){return new Promise(function(t){s("readwrite",function(n){var r=n.delete(e);r.onerror=r.onsuccess=function(e){t()}})})}function d(e){return"/"===e[e.length-1]?e:e+"/"}function p(e){return new Promise(function(t,n){s("readonly",function(r){var a=o.default.dirname(d(e)),c=r.index(u),s=IDBKeyRange.only(a),l=c.openCursor(s);l.onerror=function(e){n(e)};var f=[];l.onsuccess=function(e){var n=e.target.result;if(n){var r=n.value,o=new i.default(r.path,r.type);f.push(o),n.continue()}else t(f)}})})}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,s=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?s=u.concat(s):f=-1,s.length&&p())}function p(){if(!l){var e=c(d);l=!0;for(var t=s.length;t;){for(u=s,s=[];++f<t;)u&&u[f].run();f=-1,t=s.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new m(e,t)),1!==s.length||l||c(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){var r=n(12);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(14)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(t=e.exports=n(13)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Inconsolata:200&display=swap);",""]),t.push([e.i,"html,\nbody {\n  margin: 0;\n  padding: 0; }\n\n* {\n  box-sizing: border-box; }\n\nbody {\n  font-family: monospace;\n  color: #e6e6e6;\n  background-color: #111;\n  display: flex; }\n\nmain.game {\n  margin: auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: column;\n  margin-top: 2rem; }\n  main.game .container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    position: relative; }\n    main.game .container.title {\n      flex-direction: row;\n      font-size: 1.2rem; }\n      main.game .container.title h1 {\n        margin: 3rem 0;\n        font-family: 'Arial', sans-serif;\n        font-size: 1.8rem;\n        color: #bd133d; }\n    main.game .container.meta, main.game .container.ai {\n      margin-top: 1rem;\n      font-family: 'Inconsolata', monospace;\n      font-size: 0.7rem !important;\n      text-transform: uppercase;\n      width: 100%;\n      justify-content: space-between;\n      align-items: flex-start;\n      color: #ea3260; }\n      main.game .container.meta.bold, main.game .container.ai.bold {\n        color: '#fff' !important; }\n    main.game .container .block {\n      flex-direction: column;\n      justify-content: flex-start;\n      padding: 0.5rem;\n      display: flex; }\n      main.game .container .block button {\n        margin-bottom: 1rem; }\n      main.game .container .block > div {\n        padding: 0.2rem 0rem; }\n  main.game .ai-elem {\n    display: none; }\n    main.game .ai-elem.js-active {\n      display: block; }\n  main.game canvas,\n  main.game .splash {\n    position: absolute;\n    user-select: none; }\n  main.game .splash {\n    z-index: 10;\n    color: #bd133d;\n    background-color: rgba(0, 0, 0, 0.8);\n    padding: 1rem 4rem;\n    text-align: center; }\n    main.game .splash > div {\n      padding: 5px 0; }\n    main.game .splash .highscore {\n      font-size: 2rem;\n      margin-bottom: 1rem;\n      color: white;\n      display: none; }\n      main.game .splash .highscore.js-active {\n        display: block; }\n    main.game .splash.js-active {\n      display: none; }\n  main.game .splash {\n    color: #bd133d; }\n\nfooter {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  padding: 1rem; }\n\na,\na:visited {\n  color: inherit;\n  opacity: 0.5; }\n  a:hover,\n  a:visited:hover {\n    opacity: 1; }\n\nbutton {\n  border: none;\n  font-size: 1rem;\n  background-color: #8f0e2e;\n  padding: 0.5rem 2rem;\n  text-transform: uppercase;\n  font-family: monospace;\n  user-select: none;\n  border-radius: 3px;\n  min-width: 130px;\n  transition: all 120ms ease-in-out;\n  cursor: pointer; }\n  button.js-active, button:hover {\n    background-color: #bd133d;\n    color: #fff; }\n  button.reset {\n    background-color: #600a1f; }\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,s=0,l=[],f=n(15);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(y(r.parts[a],t))}else{var c=[];for(a=0;a<r.parts.length;a++)c.push(y(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:c}}}}function p(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],c={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}function m(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=c(e.insertAt.before,n);n.insertBefore(t,o)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return v(t,e.attrs),m(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function y(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=s++;n=u||(u=g(t)),r=S.bind(null,n,a,!1),o=S.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),m(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=f(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),c=e.href;e.href=URL.createObjectURL(a),c&&URL.revokeObjectURL(c)}.bind(null,n,t),o=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){h(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(c=i[a.id]).refs--,r.push(c)}e&&d(p(e,t),t);for(o=0;o<r.length;o++){var c;if(0===(c=r[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete i[c.id]}}}};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function S(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(0),a=n.n(i),c=(n(8),function(){var e,t,n,r,i=document.getElementById("snake"),c=document.getElementById("pip"),u=document.getElementById("powerup"),s=i.getContext("2d"),l=c.getContext("2d"),f=u.getContext("2d"),d=[L,R,"#00f70c"],p=[0,0],m=[0,0],h=[0,0],g=!1,v=0,y=12,b=[],w=7,S=0,x=!0,j=!1,E=!0,T=!1,k=!1,B=null,I=!1,M=null,A=!0,O="#f2f2f2",L="#232323",R="#bd133d",P=[],C=null,U=!1,_=function(){s.fillStyle=O,s.fillRect(p[0],p[1],e,e),b.unshift(o()(p)),W("down"),C||(C=requestAnimationFrame(V.bind(void 0)))},D=function(){var e;x=!0,console.table(P),U&&(e=P,fetch("http://localhost:5000/save",{method:"post",body:JSON.stringify(e),headers:{"content-type":"Application/json"}}).then(console.log).catch(console.error)),document.querySelector(".splash").classList.toggle("js-active"),document.querySelector(".splash .highscore").classList.remove("js-active"),v<S-1&&(v=S-1,document.querySelector(".splash .highscore").classList.toggle("js-active"),localStorage.setItem("SNAKE_HIGH_SCORE",S-1),document.getElementById("highScore").innerText="".concat(v))},F=function(e,t){return e%t==1},q=function(e){return b.filter(function(t){return t[0]===e[0]&&t[1]===e[1]}).length>0},H=function(){document.addEventListener("keydown",function(e){var t=function(){A=!1,setTimeout(function(){A=!0},600/r)};if(A)switch(e.code){case"ArrowUp":e.preventDefault(),t(),W("up");break;case"ArrowDown":e.preventDefault(),t(),W("down");break;case"ArrowLeft":e.preventDefault(),t(),W("left");break;case"ArrowRight":e.preventDefault(),t(),W("right");break;case"KeyW":t(),W("up");break;case"KeyS":t(),W("down");break;case"KeyA":t(),W("left");break;case"KeyD":t(),W("right");break;case"Enter":if(e.preventDefault(),x){X(),t(),_();break}}})},N=function(){return j?"up":E?"down":T?"left":k?"right":void 0},z=function(e){"up"===e&&(j=!0),"down"===e&&(E=!0),"left"===e&&(T=!0),"right"===e&&(k=!0),Q(e)},W=function(e){if(e!==N()){var t=function(){j=!1,E=!1,T=!1,k=!1};j&&"down"!==e||E&&"up"!==e?(t(),z(e)):(T&&"right"!==e||k&&"left"!==e)&&(t(),z(e))}},G=function(){return k?[1,0]:E?[0,1]:j?[0,-1]:T?[-1,0]:void 0},K=function(){return[Math.floor(Math.random()*Math.floor(n))*e,Math.floor(Math.random()*Math.floor(t))*e]},$=function(){for(var e="#"+Math.floor(16777215*Math.random()).toString(16);d.filter(function(t){return t===e}).length>0;)e="#"+Math.floor(16777215*Math.random()).toString(16);return e},J=function(r,o,i,a){var c=function(){for(h=K(),f.value=r,f.type=o,I=!0;q(h);)h=K();f.fillStyle=L,f.fillRect(h[0],h[1],e,e);var c=!0;M=setInterval(function(){c?(f.fillStyle=i,f.fillRect(h[0],h[1],e,e)):(f.fillStyle=L,f.fillRect(h[0],h[1],e,e)),c=!c},100),B=setTimeout(function(){f.clearRect(0,0,n*e,t*e),h=[0,0],clearInterval(M),clearTimeout(B),I=!1},1e3*a)};h===[0,0]?c():(f.clearRect(0,0,n*e,t*e),h=[0,0],I=!1,clearInterval(M),clearTimeout(B),c())},X=function(){S=0,r=y,x=!1,g=!0,p=[0,0],b=[],w=7,E=!0,O="#f2f2f2",P=[],document.querySelector(".splash").classList.add("js-active"),s.clearRect(0,0,n*e,t*e),l.clearRect(0,0,n*e,t*e),f.clearRect(0,0,n*e,t*e),clearInterval(M),W("down"),document.getElementById("highScore").innerText="".concat(v),_()},Q=function(e){P.unshift({timestamp:Date.now(),direction:e,position:o()(p),target:m,length:w})},V=function i(){if(!x){if(g&&function(){for(S++,l.fillStyle=R,m=K();q(m);)m=K();if(l.fillRect(m[0],m[1],e,e),g=!1,w+=2,r+=.5,S>10&&(r>=25&&F(S,Math.floor(Math.random()*Math.floor(10)))&&J(.3,"speed",$(),5),w>40&&F(S,Math.floor(Math.random()*Math.floor(20)))&&J(.2,"length",$(),8),F(S,Math.floor(Math.random()*Math.floor(20))))){var t=$();J(t,"color",t,10)}}(),s.fillStyle=O,p[0]+=G()[0]*e,p[1]+=G()[1]*e,b.length<w)b.unshift(o()(p));else{var a=b.filter(function(e,t){return t!==w-1});a.unshift(o()(p)),b=o()(a)}s.fillRect(p[0],p[1],e,e),function(){if(m[0]===p[0]&&m[1]===p[1]&&(g=!0,l.clearRect(m[0],m[1],e,e)),I&&h[0]===p[0]&&h[1]===p[1]){if(I=!1,f.clearRect(0,0,n*e,t*e),"color"===f.type&&(O=f.value),"speed"===f.type){var o=Math.round(r*f.value);r-o>y?r-=o:r=y}if("length"===f.type)for(var i=Math.round(w*f.value),a=0;a<i;a++)s.clearRect(b[w-1][0],b[w-1][1],e,e),b.pop(),w--;clearInterval(B),clearTimeout(M),h=[0,0]}(p[0]<0||p[0]===n*e||p[1]<0||p[1]===t*e)&&D(),b.map(function(e,t){if(t>0)return e[0]===p[0]&&e[1]===p[1]}).filter(function(e){return!0===e}).length>0&&D()}()}setTimeout(function(){b.length===w&&s.clearRect(b[w-1][0],b[w-1][1],e,e),document.getElementById("fps").innerText="".concat(Math.floor(r)||y),document.getElementById("length").innerText=w,document.getElementById("level").innerText="".concat(S),i()},1e3/r)};return{getState:function(){var o;return o={snakePosition:p,pipPosition:m,snakeBody:b,powerUpPosition:h,newLevel:g,HIGH_SCORE:v,startFPS:y,scaleFactor:e,gameHeight:t,gameWidth:n},a()(o,"snakeBody",b),a()(o,"snakeLength",w),a()(o,"level",S),a()(o,"fps",r),a()(o,"dead",x),a()(o,"up",j),a()(o,"down",E),a()(o,"left",T),a()(o,"right",k),a()(o,"powerUpTimer",B),a()(o,"powerUpActive",I),a()(o,"colorSwitch",M),a()(o,"keysActive",A),a()(o,"snakeColor",O),a()(o,"backgroundColor",L),a()(o,"pipColor",R),a()(o,"moveHistory",P),a()(o,"writeData",U),o},getCurrentDirection:N,toggleDirection:W,isSnakeBody:q,init:function(r){r.sounds,y=r.startFPS||12,e=r.scaleFactor||15,t=r.gameHeight||20,n=r.gameWidth||40,U=r.writeData,i.style.backgroundColor=L,i.width=n*e,i.height=t*e,c.width=n*e,c.height=t*e,u.width=n*e,u.height=t*e,v=localStorage.getItem("SNAKE_HIGH_SCORE")?localStorage.getItem("SNAKE_HIGH_SCORE"):0,document.querySelector(".view").style.height="".concat(t*e,"px"),document.querySelector(".view").style.width="".concat(n*e,"px"),document.getElementById("highScore").innerText="".concat(v),document.querySelector(".splash .highscore").classList.remove("js-active"),document.querySelector(".meta").style.fontSize="".concat(.1*e,"rem"),H()},moves:["up","down","left","right"],gameWidth:n,gameHeight:t,resetGame:X,turbo:function(e){r+=e}}}),u=[["up","right","down","left"],["up","left","down","right"],["down","right","up","left"],["down","left","up","right"],["left","up","right","down"],["left","down","right","up"],["right","up","left","down"],["right","down","left","up"]],s=function(e){var t=e.moves,n=!1,r=function(e){switch(e){case"up":return[0,-1];case"down":return[0,1];case"left":return[-1,0];case"right":return[1,0]}},i=e.getState().gameWidth*e.getState().scaleFactor-e.getState().scaleFactor,a=e.getState().gameHeight*e.getState().scaleFactor-e.getState().scaleFactor,c=function(e){return e[0]<=i&&e[0]>=0&&e[1]<=a&&e[1]>=0},s=function(t,n){return[n[0]+r(t)[0]*e.getState().scaleFactor,n[1]+r(t)[1]*e.getState().scaleFactor]},l=function(t,n){return function(t){switch(e.getCurrentDirection()){case"up":return"down"!==t;case"down":return"up"!==t;case"left":return"right"!==t;case"right":return"left"!==t}}(n)&&c(t)&&!e.isSnakeBody(t)},f=function(t,n){var r=(n[0]-t[0])*(n[0]-t[0]),o=(n[1]-t[1])*(n[1]-t[1]);return Math.round(Math.sqrt(r+o)/e.getState().scaleFactor)},d=function(t,n){var r=function(e){switch(e){case"up":case"down":return["left","right"];case"left":case"right":return["up","down"]}}(t);return 2===o()(r.filter(function(r){return e.isSnakeBody(s(r,s(t,n)))||!c(s(r,s(t,n)))})).length},p=function(n,r){e.getCurrentDirection();var o=function(n){var r=[];return t.map(function(t){l(s(t,n),t)&&r.push([s(t,n),t]);var o=function(e,t,n,r){if(t.length>2){for(var o=[],i=n,a=0;a<3;a++){var c=t[a];o.push([c.position,c.direction])}var u={};if(i.map(function(e,t){u[e]=t}),3===(o=o.filter(function(e){return u.hasOwnProperty(e[0])})).length){var s={};r.map(function(e,t){s[e]=t});var l=[e[1]];o.map(function(e){return l.push(e[1])}),s.hasOwnProperty(l)}return o.length}return 0}([s(t,n),t],e.getState().moveHistory,e.getState().snakeBody,u)/4*100;document.getElementById("square").innerText=Math.round(o)+"%"}),r}(e.getState().snakePosition),i=[];o.map(function(e){return i.push(e[1])}),document.getElementById("moves").innerText=i.join(", ");var a=function(t){var n=e.getState().pipPosition,r=e.getState().snakePosition;e.getState().powerUpActive&&(n=f(n,r)<f(e.getState().powerUpPosition,r)?e.getState().pipPosition:e.getState().powerUpPosition);var o=f(n,r),i=null,a={};return document.getElementById("distance").innerText=o,t.map(function(e,t){a[t]=o-f(e[0],n)}),Object.keys(a).map(function(e){1===a[e]&&(i=d(t[e][1],r)?null:t[e])}),i||Object.keys(a).map(function(e){0===a[e]&&(i=d(t[e][1],r)?null:t[e])}),i||Object.keys(a).map(function(e){-1===a[e]&&(i=d(t[e][1],r)?null:t[e])}),i||console.log("No Best Move: ",t,a),i||t[0]}(o);a&&(e.toggleDirection(a[1]),document.getElementById("move").innerText=a[1])};return requestAnimationFrame(function(){return function e(t){!t.getState().dead&&n&&(document.getElementById("snakePosition").innerText=t.getState().snakePosition,p(t.getState().moveHistory,t.getState().snakeBody)),setTimeout(function(){e(t)},1e3/t.getState().fps)}(e)}),{setEnabled:function(e){n=e}}},l=(n(11),function(){return Math.floor(window.innerWidth/20-.01*window.innerWidth)});window.addEventListener("DOMContentLoaded",function(){var e,t=!1,n=c();n.init({sounds:!1,startFPS:10,scaleFactor:15,gameHeight:Math.floor(window.innerHeight/25-.01*window.innerHeight),gameWidth:l()>60?60:l(),writeData:!0}),e=s(n);var r=document.getElementById("snake").clientWidth;document.querySelector("main.game").style.width=r+"px";var o=function(e){document.getElementById("aiBtn").innerText="AI On",document.getElementById("aiBtn").classList.add("js-active");var t=!0,n=!1,r=void 0;try{for(var o,i=document.getElementsByClassName("ai-elem")[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.classList.add("js-active")}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}e.setEnabled(!0)},i=function(e){(t=!t)?o(e):function(e){document.getElementById("aiBtn").innerText="AI Off",document.getElementById("aiBtn").classList.remove("js-active");var t=!0,n=!1,r=void 0;try{for(var o,i=document.getElementsByClassName("ai-elem")[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.classList.remove("js-active")}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}e.setEnabled(!1)}(e)},a=0;document.getElementById("aiBtn").addEventListener("click",function(){return i(e)}),document.getElementById("reset").addEventListener("click",function(){a=0,document.querySelector(".turbo").classList.remove("js-active"),document.querySelector(".turbo").innerText="Turbo",n.resetGame()}),document.getElementById("turbo").addEventListener("click",function(){document.querySelector(".turbo").classList.add("js-active"),a++,document.querySelector(".turbo").innerText="Turbo X ".concat(a),n.turbo(20)}),t&&o(e)})}]);
//# sourceMappingURL=main.js.map